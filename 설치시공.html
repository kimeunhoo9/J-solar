<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>설치 & 시공 갤러리</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px 10%;
      background: #f7f7f7;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 28px;
      font-weight: 600;
    }

    .gallery {
      column-count: 3;
      column-gap: 20px;
    }

    @media (max-width: 1000px) {
      .gallery { column-count: 2; }
    }

    @media (max-width: 600px) {
      .gallery { column-count: 1; }
    }

    .item {
      display: inline-block;
      margin-bottom: 20px;
      width: 100%;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .item img {
      width: 100%;
      display: block;
      cursor: pointer;
      border-bottom: 1px solid #eee;
    }

    .desc {
      padding: 15px 20px;
      font-size: 15px;
      color: #444;
    }

    .popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.75);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .popup img {
      max-width: 85%;
      max-height: 85%;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .pagination {
      margin-top: 40px;
      text-align: center;
    }

    .pagination button {
      margin: 0 5px;
      padding: 10px 15px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
    }

    .pagination .active {
      background: #0056b3;
      font-weight: bold;
    }
  </style>
</head>

<body>

  <h2>설치 & 시공 갤러리</h2>

  <!-- ==============================
       ① 네가 직접 넣은 이미지들
     ============================== -->
  <div class="gallery" id="gallerySource" style="display:none;">

    <div class="item">
      <img src="images/영암하나로마트시공사진.jpg" onclick="openPopup('images/영암하나로마트시공사진.jpg')">
      <p class="desc">영암하나로마트 태양광 시공</p>
    </div>

    <div class="item">
      <img src="images/강진하나로마트시공사진.jpg" onclick="openPopup('images/강진하나로마트시공사진.jpg')">
      <p class="desc">강진하나로마트 태양광 시공</p>
    </div>

    <div class="item">
      <img src="images/전남영암군삼호읍대불산단.jpg" onclick="openPopup('images/전남영암군삼호읍대불산단.jpg')">
      <p class="desc">전남 영암군 삼호읍 대불산단 태양광 시공</p>
    </div>

    <div class="item">
      <img src="images/전남영암군금정면토지설치.jpg" onclick="openPopup('images/전남영암군금정면토지설치.jpg')">
      <p class="desc">전남 영암군 금정면 토지 태양광 시공</p>
    </div>

    <div class="item">
      <img src="images/전남영암군미암면축사위태양광.jpg" onclick="openPopup('images/전남영암군미암면축사위태양광.jpg')">
      <p class="desc">전남 영암군 미암면 축사 위 태양광 시공</p>
    </div>

    <div class="item">
      <img src="images/전남영암군미암면축사위태양광2.jpg" onclick="openPopup('images/전남영암군미암면축사위태양광2.jpg')">
      <p class="desc">전남 영암군 미암면 축사 위 태양광 시공</p>
    </div>

  </div>

  <!-- 실제 렌더링되는 갤러리 -->
  <div class="gallery" id="gallery"></div>

  <div class="pagination" id="pagination"></div>

  <!-- 팝업 -->
  <div class="popup" id="popup" onclick="closePopup()">
    <img id="popupImg">
  </div>

  <script>
    const itemsPerPage = 12;

    // 원본 이미지 리스트 가져오기
    const sourceItems = Array.from(document.querySelectorAll("#gallerySource .item"));

    const urlParams = new URLSearchParams(window.location.search);
    let currentPage = parseInt(urlParams.get("page")) || 1;

    function showPage(page) {
      currentPage = page;

      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;

      const gallery = document.getElementById("gallery");
      gallery.innerHTML = "";

      const pageItems = sourceItems.slice(start, end);

      pageItems.forEach(item => {
        gallery.appendChild(item.cloneNode(true));
      });

      updatePagination();
    }

    function updatePagination() {
      const totalPages = Math.ceil(sourceItems.length / itemsPerPage);
      const pagination = document.getElementById("pagination");

      pagination.innerHTML = "";

      if (currentPage > 1) {
        pagination.innerHTML += `<button onclick="goPage(${currentPage - 1})">이전</button>`;
      }

      for (let i = 1; i <= totalPages; i++) {
        pagination.innerHTML += `
          <button onclick="goPage(${i})" class="${currentPage === i ? 'active' : ''}">
            ${i}
          </button>
        `;
      }

      if (currentPage < totalPages) {
        pagination.innerHTML += `<button onclick="goPage(${currentPage + 1})">다음</button>`;
      }
    }

    function goPage(num) {
      location.href = `?page=${num}`;
    }

    function openPopup(src) {
      document.getElementById("popupImg").src = src;
      document.getElementById("popup").style.display = "flex";
    }

    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }

    showPage(currentPage);
  </script>

</body>
</html>
